<!DOCTYPE html>
<head>
	<script>
		var captions = [
			[0, "Bang"],
			[3, "a"],
			[5, "rang"],
			[10, "wub wub wub"]
		];


		function onPageLoad() {
			var audio = document.getElementById("audio");
			new Captioner(document.getElementById("audio"), document.getElementById("caption"), captions);
		}

		function Captioner(audioElement, captionElement, captionArray) {
			this.audioElement = audioElement;
			this.captionElement = captionElement;
			this.captionArray = captionArray;
			this.captionIndex = 0;
			this.updateCaptions = function() {
				if (this.captionIndex < captionArray.length) {
					var time = this.audioElement.currentTime;
					if (time > this.captionArray[this.captionIndex][0]) {
						this.captionElement.innerHTML = this.captionArray[this.captionIndex][1];
						this.captionIndex++;
					}
				}
			};
			captioner = this;
			audioElement.addEventListener('timeupdate',
					function() {
						captioner.updateCaptions();
					});
		}

		window.onload = onPageLoad;
	</script>
</head>
<body>
	<div id = "caption">Captions go here</div>
	<audio id = "audio" controls>
		<source src="audio.mp3" type="audio/mpeg">
		Error, Will Robinson!
	</audio>
</body>